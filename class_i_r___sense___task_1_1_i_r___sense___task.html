<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME405 Term Project: IR_Sense_Task.IR_Sense_Task Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME405 Term Project
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_i_r___sense___task_1_1_i_r___sense___task.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_i_r___sense___task_1_1_i_r___sense___task-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">IR_Sense_Task.IR_Sense_Task Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_i_r___sense___task_1_1_i_r___sense___task.html" title="IR_Sense_Task provides a driver to track the array of IR sensors for line following.">IR_Sense_Task</a> provides a driver to track the array of IR sensors for line following.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a458848efb0a2ce61f41e343b61f92547" id="r_a458848efb0a2ce61f41e343b61f92547"><td class="memItemLeft" align="right" valign="top"><a id="a458848efb0a2ce61f41e343b61f92547" name="a458848efb0a2ce61f41e343b61f92547"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, dataQueue, ctrlState, offset, strength)</td></tr>
<tr class="separator:a458848efb0a2ce61f41e343b61f92547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f86d7812ec575d49eabe2fca904e8e" id="r_a08f86d7812ec575d49eabe2fca904e8e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a08f86d7812ec575d49eabe2fca904e8e">callback</a> (self, pin)</td></tr>
<tr class="memdesc:a08f86d7812ec575d49eabe2fca904e8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback(pin) defines the callback when the IR sensor pin is driven low by the sensor to indicate the reflectance.  <br /></td></tr>
<tr class="separator:a08f86d7812ec575d49eabe2fca904e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fbec65f3236763fd47bec98f7400fa1" id="r_a2fbec65f3236763fd47bec98f7400fa1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2fbec65f3236763fd47bec98f7400fa1">run</a> (self)</td></tr>
<tr class="memdesc:a2fbec65f3236763fd47bec98f7400fa1"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="#a2fbec65f3236763fd47bec98f7400fa1" title="run() runs the next state of the state machine.">run()</a> runs the next state of the state machine.  <br /></td></tr>
<tr class="separator:a2fbec65f3236763fd47bec98f7400fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ababf018824ac4201ec129c5b760fced5" id="r_ababf018824ac4201ec129c5b760fced5"><td class="memItemLeft" align="right" valign="top"><a id="ababf018824ac4201ec129c5b760fced5" name="ababf018824ac4201ec129c5b760fced5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dataQueue</b> = dataQueue</td></tr>
<tr class="separator:ababf018824ac4201ec129c5b760fced5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6e563788dc7df34d6983748af1d89c" id="r_a7d6e563788dc7df34d6983748af1d89c"><td class="memItemLeft" align="right" valign="top"><a id="a7d6e563788dc7df34d6983748af1d89c" name="a7d6e563788dc7df34d6983748af1d89c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ctrlState</b> = ctrlState</td></tr>
<tr class="separator:a7d6e563788dc7df34d6983748af1d89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af849cda7aacc6dca7dcff278623ef608" id="r_af849cda7aacc6dca7dcff278623ef608"><td class="memItemLeft" align="right" valign="top"><a id="af849cda7aacc6dca7dcff278623ef608" name="af849cda7aacc6dca7dcff278623ef608"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>offset</b> = offset</td></tr>
<tr class="separator:af849cda7aacc6dca7dcff278623ef608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11e8ef4b3cb50f21a1fecd8d4732cccf" id="r_a11e8ef4b3cb50f21a1fecd8d4732cccf"><td class="memItemLeft" align="right" valign="top"><a id="a11e8ef4b3cb50f21a1fecd8d4732cccf" name="a11e8ef4b3cb50f21a1fecd8d4732cccf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>strength</b> = strength</td></tr>
<tr class="separator:a11e8ef4b3cb50f21a1fecd8d4732cccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcae39b97480a07c2793ffd7c990c41a" id="r_afcae39b97480a07c2793ffd7c990c41a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afcae39b97480a07c2793ffd7c990c41a">state</a> = 0</td></tr>
<tr class="memdesc:afcae39b97480a07c2793ffd7c990c41a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Next state to be run by the state machine.  <br /></td></tr>
<tr class="separator:afcae39b97480a07c2793ffd7c990c41a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7375d02440af1ef490458b366c87c8c" id="r_aa7375d02440af1ef490458b366c87c8c"><td class="memItemLeft" align="right" valign="top"><a id="aa7375d02440af1ef490458b366c87c8c" name="aa7375d02440af1ef490458b366c87c8c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>index</b> = 0</td></tr>
<tr class="memdesc:aa7375d02440af1ef490458b366c87c8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index in list of the current sensor being read from the array. <br /></td></tr>
<tr class="separator:aa7375d02440af1ef490458b366c87c8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05dae1f01654d44be4ab03e0f4deadb2" id="r_a05dae1f01654d44be4ab03e0f4deadb2"><td class="memItemLeft" align="right" valign="top"><a id="a05dae1f01654d44be4ab03e0f4deadb2" name="a05dae1f01654d44be4ab03e0f4deadb2"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>pinNums</b> = [Pin.cpu.C10, Pin.cpu.C12, Pin.cpu.A15, Pin.cpu.H0, Pin.cpu.H1, Pin.cpu.C3, Pin.cpu.C11]</td></tr>
<tr class="memdesc:a05dae1f01654d44be4ab03e0f4deadb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of the pin identifier objects associated with each IR sensor. <br /></td></tr>
<tr class="separator:a05dae1f01654d44be4ab03e0f4deadb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0057e2019fcaa23d659d6c6f5d20a21" id="r_af0057e2019fcaa23d659d6c6f5d20a21"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0057e2019fcaa23d659d6c6f5d20a21">referenced</a> = 0</td></tr>
<tr class="memdesc:af0057e2019fcaa23d659d6c6f5d20a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag to indicate the current state of IR sensor referencing.  <br /></td></tr>
<tr class="separator:af0057e2019fcaa23d659d6c6f5d20a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79cb7a02ea0578d34cad2b2be143b21d" id="r_a79cb7a02ea0578d34cad2b2be143b21d"><td class="memItemLeft" align="right" valign="top"><a id="a79cb7a02ea0578d34cad2b2be143b21d" name="a79cb7a02ea0578d34cad2b2be143b21d"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>rawData</b> = []</td></tr>
<tr class="memdesc:a79cb7a02ea0578d34cad2b2be143b21d"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of most recent measurement of reflectance directly from the sensor, expressed as microseconds of delay. <br /></td></tr>
<tr class="separator:a79cb7a02ea0578d34cad2b2be143b21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0830b9c8a490f173df4609c419ec5b7" id="r_aa0830b9c8a490f173df4609c419ec5b7"><td class="memItemLeft" align="right" valign="top"><a id="aa0830b9c8a490f173df4609c419ec5b7" name="aa0830b9c8a490f173df4609c419ec5b7"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>pinList</b> = []</td></tr>
<tr class="memdesc:aa0830b9c8a490f173df4609c419ec5b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of pin objects for toggling the pins from input to output. <br /></td></tr>
<tr class="separator:aa0830b9c8a490f173df4609c419ec5b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7865ab23f9ed3fa076c22f4f9c7c03d6" id="r_a7865ab23f9ed3fa076c22f4f9c7c03d6"><td class="memItemLeft" align="right" valign="top"><a id="a7865ab23f9ed3fa076c22f4f9c7c03d6" name="a7865ab23f9ed3fa076c22f4f9c7c03d6"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>interruptPins</b> = []</td></tr>
<tr class="memdesc:a7865ab23f9ed3fa076c22f4f9c7c03d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of ExtInt objects for enabling and disabling the interrupt callabacks. <br /></td></tr>
<tr class="separator:a7865ab23f9ed3fa076c22f4f9c7c03d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6338c29343246de4e39dacd7b75943d5" id="r_a6338c29343246de4e39dacd7b75943d5"><td class="memItemLeft" align="right" valign="top"><a id="a6338c29343246de4e39dacd7b75943d5" name="a6338c29343246de4e39dacd7b75943d5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>callback</b></td></tr>
<tr class="separator:a6338c29343246de4e39dacd7b75943d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3224ba0e696e8a101bbcbf95d17d5cba" id="r_a3224ba0e696e8a101bbcbf95d17d5cba"><td class="memItemLeft" align="right" valign="top"><a id="a3224ba0e696e8a101bbcbf95d17d5cba" name="a3224ba0e696e8a101bbcbf95d17d5cba"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>prevIndex</b> = -1</td></tr>
<tr class="memdesc:a3224ba0e696e8a101bbcbf95d17d5cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">The index of the last sensor that was read, to identify when the callback has completed its reading. <br /></td></tr>
<tr class="separator:a3224ba0e696e8a101bbcbf95d17d5cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76899a775ba153b5bbe3036ce522184" id="r_af76899a775ba153b5bbe3036ce522184"><td class="memItemLeft" align="right" valign="top"><a id="af76899a775ba153b5bbe3036ce522184" name="af76899a775ba153b5bbe3036ce522184"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>reflectance</b> = []</td></tr>
<tr class="memdesc:af76899a775ba153b5bbe3036ce522184"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of reflectance measurements scaled by the white and black references between 0 and 100. <br /></td></tr>
<tr class="separator:af76899a775ba153b5bbe3036ce522184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ffca45c46bfc98134a5e62b9eac1d5e" id="r_a7ffca45c46bfc98134a5e62b9eac1d5e"><td class="memItemLeft" align="right" valign="top"><a id="a7ffca45c46bfc98134a5e62b9eac1d5e" name="a7ffca45c46bfc98134a5e62b9eac1d5e"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>whiteRef</b> = []</td></tr>
<tr class="memdesc:a7ffca45c46bfc98134a5e62b9eac1d5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of direct reflectance measurements taken over a white reference. <br /></td></tr>
<tr class="separator:a7ffca45c46bfc98134a5e62b9eac1d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcb2eb52ecca9464e14903311821c2d4" id="r_adcb2eb52ecca9464e14903311821c2d4"><td class="memItemLeft" align="right" valign="top"><a id="adcb2eb52ecca9464e14903311821c2d4" name="adcb2eb52ecca9464e14903311821c2d4"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>blackRef</b> = []</td></tr>
<tr class="memdesc:adcb2eb52ecca9464e14903311821c2d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of direct reflectance measurements taken over a black reference. <br /></td></tr>
<tr class="separator:adcb2eb52ecca9464e14903311821c2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5861b77d763bf0851c6c50af149c73c8" id="r_a5861b77d763bf0851c6c50af149c73c8"><td class="memItemLeft" align="right" valign="top"><a id="a5861b77d763bf0851c6c50af149c73c8" name="a5861b77d763bf0851c6c50af149c73c8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>strength_list</b> = array('i', <a class="el" href="#a1e572b13480ad1ed0ed4f0ccd6559b71">IR_Sense_Task.STRENGTH_AVE</a>*[0])</td></tr>
<tr class="memdesc:a5861b77d763bf0851c6c50af149c73c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of last several strength values that will be averaged together. <br /></td></tr>
<tr class="separator:a5861b77d763bf0851c6c50af149c73c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98d3a54781dcebe05c1cc1739143bdaa" id="r_a98d3a54781dcebe05c1cc1739143bdaa"><td class="memItemLeft" align="right" valign="top"><a id="a98d3a54781dcebe05c1cc1739143bdaa" name="a98d3a54781dcebe05c1cc1739143bdaa"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>strength_index</b> = 0</td></tr>
<tr class="memdesc:a98d3a54781dcebe05c1cc1739143bdaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current index to be set in the strength_list list. <br /></td></tr>
<tr class="separator:a98d3a54781dcebe05c1cc1739143bdaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9962404183255d2dc8ff3470c576bf05" id="r_a9962404183255d2dc8ff3470c576bf05"><td class="memItemLeft" align="right" valign="top"><a id="a9962404183255d2dc8ff3470c576bf05" name="a9962404183255d2dc8ff3470c576bf05"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>timeStamp</b> = ticks_us()</td></tr>
<tr class="separator:a9962404183255d2dc8ff3470c576bf05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a1e572b13480ad1ed0ed4f0ccd6559b71" id="r_a1e572b13480ad1ed0ed4f0ccd6559b71"><td class="memItemLeft" align="right" valign="top"><a id="a1e572b13480ad1ed0ed4f0ccd6559b71" name="a1e572b13480ad1ed0ed4f0ccd6559b71"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>STRENGTH_AVE</b> = 5</td></tr>
<tr class="memdesc:a1e572b13480ad1ed0ed4f0ccd6559b71"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of IR reflectance strength values to average over time before assigning strength. <br /></td></tr>
<tr class="separator:a1e572b13480ad1ed0ed4f0ccd6559b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b47ced08c32d4aa6167b1e8b02d7470" id="r_a0b47ced08c32d4aa6167b1e8b02d7470"><td class="memItemLeft" align="right" valign="top"><a id="a0b47ced08c32d4aa6167b1e8b02d7470" name="a0b47ced08c32d4aa6167b1e8b02d7470"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_OFFSET</b> = 400</td></tr>
<tr class="memdesc:a0b47ced08c32d4aa6167b1e8b02d7470"><td class="mdescLeft">&#160;</td><td class="mdescRight">The largest allowable offset reading before we begin to saturate. <br /></td></tr>
<tr class="separator:a0b47ced08c32d4aa6167b1e8b02d7470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a2b1728e2206aebb1d12bd93a579d8" id="r_a99a2b1728e2206aebb1d12bd93a579d8"><td class="memItemLeft" align="right" valign="top"><a id="a99a2b1728e2206aebb1d12bd93a579d8" name="a99a2b1728e2206aebb1d12bd93a579d8"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>BIAS</b> = 0</td></tr>
<tr class="memdesc:a99a2b1728e2206aebb1d12bd93a579d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines an automatic bias in the offset value. <br /></td></tr>
<tr class="separator:a99a2b1728e2206aebb1d12bd93a579d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_i_r___sense___task_1_1_i_r___sense___task.html" title="IR_Sense_Task provides a driver to track the array of IR sensors for line following.">IR_Sense_Task</a> provides a driver to track the array of IR sensors for line following. </p>
<p>The IR sensors are the RC model, not the analog model. The steps to read from each sensor are 1) start with the pin low 2) drive the pin high briefly 3) enable the pin callback 4) assign the pin as an input to disconnect 5) wait for the pin to be driven high by the sensor 6) record the time. <br  />
 Every call to the <a class="el" href="#a2fbec65f3236763fd47bec98f7400fa1" title="run() runs the next state of the state machine.">run()</a> function, we read, at most, one sensor, if it is available. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a08f86d7812ec575d49eabe2fca904e8e" name="a08f86d7812ec575d49eabe2fca904e8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08f86d7812ec575d49eabe2fca904e8e">&#9670;&#160;</a></span>callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IR_Sense_Task.IR_Sense_Task.callback </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>callback(pin) defines the callback when the IR sensor pin is driven low by the sensor to indicate the reflectance. </p>
<p>Data is stored directly in the rawData variable because floating point math is forbidden in callbacks </p>

</div>
</div>
<a id="a2fbec65f3236763fd47bec98f7400fa1" name="a2fbec65f3236763fd47bec98f7400fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fbec65f3236763fd47bec98f7400fa1">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IR_Sense_Task.IR_Sense_Task.run </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="#a2fbec65f3236763fd47bec98f7400fa1" title="run() runs the next state of the state machine.">run()</a> runs the next state of the state machine. </p>
<p>It is intended to be called by the scheduler with a period of 2ms. Once in the reading state, every call to <a class="el" href="#a2fbec65f3236763fd47bec98f7400fa1" title="run() runs the next state of the state machine.">run()</a> does the following things: 1) Set the next sensor high 2) enable the callback for the current sensor 3) set the current sensor to an input 4) update strength and offset </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af0057e2019fcaa23d659d6c6f5d20a21" name="af0057e2019fcaa23d659d6c6f5d20a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0057e2019fcaa23d659d6c6f5d20a21">&#9670;&#160;</a></span>referenced</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IR_Sense_Task.IR_Sense_Task.referenced = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag to indicate the current state of IR sensor referencing. </p>
<p>0 = no reference, 1 = white reference only, 2 = both references set </p>

</div>
</div>
<a id="afcae39b97480a07c2793ffd7c990c41a" name="afcae39b97480a07c2793ffd7c990c41a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcae39b97480a07c2793ffd7c990c41a">&#9670;&#160;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int IR_Sense_Task.IR_Sense_Task.state = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Next state to be run by the state machine. </p>
<p>0 = initialization, 1 = waiting, 2 = reset, 3 = sensing </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><b>IR_Sense_Task.py</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>IR_Sense_Task</b></li><li class="navelem"><a class="el" href="class_i_r___sense___task_1_1_i_r___sense___task.html">IR_Sense_Task</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
