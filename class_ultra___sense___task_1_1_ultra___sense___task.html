<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME405 Term Project: Ultra_Sense_Task.Ultra_Sense_Task Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME405 Term Project
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_ultra___sense___task_1_1_ultra___sense___task.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_ultra___sense___task_1_1_ultra___sense___task-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Ultra_Sense_Task.Ultra_Sense_Task Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_ultra___sense___task_1_1_ultra___sense___task.html" title="Ultra_Sense_Task provides a driver to track the various ultrasonic sensors.">Ultra_Sense_Task</a> provides a driver to track the various ultrasonic sensors.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2b556fccb442f418377d80842d37ee21" id="r_a2b556fccb442f418377d80842d37ee21"><td class="memItemLeft" align="right" valign="top"><a id="a2b556fccb442f418377d80842d37ee21" name="a2b556fccb442f418377d80842d37ee21"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>__init__</b> (self, dataQueue, ctrlState, distance)</td></tr>
<tr class="separator:a2b556fccb442f418377d80842d37ee21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae84279b0dccc82bc17ed14cb86a7ede0" id="r_ae84279b0dccc82bc17ed14cb86a7ede0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae84279b0dccc82bc17ed14cb86a7ede0">callback</a> (self, pin)</td></tr>
<tr class="memdesc:ae84279b0dccc82bc17ed14cb86a7ede0"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback(pin) defines the callback when the ultrasonic echo sensor pin is driven low by the sensor to indicate the distance.  <br /></td></tr>
<tr class="separator:ae84279b0dccc82bc17ed14cb86a7ede0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03c4a0f93ac63f1bc4f97dc59079f333" id="r_a03c4a0f93ac63f1bc4f97dc59079f333"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a03c4a0f93ac63f1bc4f97dc59079f333">run</a> (self)</td></tr>
<tr class="memdesc:a03c4a0f93ac63f1bc4f97dc59079f333"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="#a03c4a0f93ac63f1bc4f97dc59079f333" title="run() runs the next state of the state machine.">run()</a> runs the next state of the state machine.  <br /></td></tr>
<tr class="separator:a03c4a0f93ac63f1bc4f97dc59079f333"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a0566125e6a57bc30412c548a11bb24e2" id="r_a0566125e6a57bc30412c548a11bb24e2"><td class="memItemLeft" align="right" valign="top"><a id="a0566125e6a57bc30412c548a11bb24e2" name="a0566125e6a57bc30412c548a11bb24e2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>dataQueue</b> = dataQueue</td></tr>
<tr class="separator:a0566125e6a57bc30412c548a11bb24e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10d17e79b9295b67014e67990f4287c2" id="r_a10d17e79b9295b67014e67990f4287c2"><td class="memItemLeft" align="right" valign="top"><a id="a10d17e79b9295b67014e67990f4287c2" name="a10d17e79b9295b67014e67990f4287c2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ctrlState</b> = ctrlState</td></tr>
<tr class="separator:a10d17e79b9295b67014e67990f4287c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2761812b8101c4fb93578d0664a093c5" id="r_a2761812b8101c4fb93578d0664a093c5"><td class="memItemLeft" align="right" valign="top"><a id="a2761812b8101c4fb93578d0664a093c5" name="a2761812b8101c4fb93578d0664a093c5"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>distance</b> = []</td></tr>
<tr class="separator:a2761812b8101c4fb93578d0664a093c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86550b06ab27ccce630acb6519a40bb4" id="r_a86550b06ab27ccce630acb6519a40bb4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86550b06ab27ccce630acb6519a40bb4">state</a> = 0</td></tr>
<tr class="memdesc:a86550b06ab27ccce630acb6519a40bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Next state to be run by the state machine.  <br /></td></tr>
<tr class="separator:a86550b06ab27ccce630acb6519a40bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b44e5e9ac0dc9e7d79a78554076697" id="r_a50b44e5e9ac0dc9e7d79a78554076697"><td class="memItemLeft" align="right" valign="top"><a id="a50b44e5e9ac0dc9e7d79a78554076697" name="a50b44e5e9ac0dc9e7d79a78554076697"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>index</b> = 0</td></tr>
<tr class="memdesc:a50b44e5e9ac0dc9e7d79a78554076697"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index in list of the current sensor being read from the array. <br /></td></tr>
<tr class="separator:a50b44e5e9ac0dc9e7d79a78554076697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a829b5a96f3c74e1774b11032d31bcbc1" id="r_a829b5a96f3c74e1774b11032d31bcbc1"><td class="memItemLeft" align="right" valign="top"><a id="a829b5a96f3c74e1774b11032d31bcbc1" name="a829b5a96f3c74e1774b11032d31bcbc1"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>echoNums</b> = [Pin.cpu.B2, Pin.cpu.B14]</td></tr>
<tr class="memdesc:a829b5a96f3c74e1774b11032d31bcbc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of the pin identifier objects associated with each echo pin. <br /></td></tr>
<tr class="separator:a829b5a96f3c74e1774b11032d31bcbc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf5c3db7ee2762f1675a297c0c11721" id="r_aacf5c3db7ee2762f1675a297c0c11721"><td class="memItemLeft" align="right" valign="top"><a id="aacf5c3db7ee2762f1675a297c0c11721" name="aacf5c3db7ee2762f1675a297c0c11721"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>rawData</b> = []</td></tr>
<tr class="memdesc:aacf5c3db7ee2762f1675a297c0c11721"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of most recent measurement of reflectance directly from the sensor, expressed as microseconds of delay. <br /></td></tr>
<tr class="separator:aacf5c3db7ee2762f1675a297c0c11721"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f961353444eed619f85502de2a88b09" id="r_a5f961353444eed619f85502de2a88b09"><td class="memItemLeft" align="right" valign="top"><a id="a5f961353444eed619f85502de2a88b09" name="a5f961353444eed619f85502de2a88b09"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>interruptPins</b> = []</td></tr>
<tr class="memdesc:a5f961353444eed619f85502de2a88b09"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of ExtInt objects for enabling and disabling the interrupt callabacks. <br /></td></tr>
<tr class="separator:a5f961353444eed619f85502de2a88b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5934fca027d532bc24a66a92168a9160" id="r_a5934fca027d532bc24a66a92168a9160"><td class="memItemLeft" align="right" valign="top"><a id="a5934fca027d532bc24a66a92168a9160" name="a5934fca027d532bc24a66a92168a9160"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>callback</b></td></tr>
<tr class="separator:a5934fca027d532bc24a66a92168a9160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a565af08a802e4b66afd4cd0c67a16f80" id="r_a565af08a802e4b66afd4cd0c67a16f80"><td class="memItemLeft" align="right" valign="top"><a id="a565af08a802e4b66afd4cd0c67a16f80" name="a565af08a802e4b66afd4cd0c67a16f80"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>trigNums</b> = [Pin.cpu.B11, Pin.cpu.B13]</td></tr>
<tr class="memdesc:a565af08a802e4b66afd4cd0c67a16f80"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of the pin identifier objects associated with each trigger pin. <br /></td></tr>
<tr class="separator:a565af08a802e4b66afd4cd0c67a16f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11406e98c2cc24568e0f2931ab41e604" id="r_a11406e98c2cc24568e0f2931ab41e604"><td class="memItemLeft" align="right" valign="top"><a id="a11406e98c2cc24568e0f2931ab41e604" name="a11406e98c2cc24568e0f2931ab41e604"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>trigPins</b> = []</td></tr>
<tr class="memdesc:a11406e98c2cc24568e0f2931ab41e604"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of Pin objects associated with each trigger pin. <br /></td></tr>
<tr class="separator:a11406e98c2cc24568e0f2931ab41e604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12f33270dd5fbe6e25ffec5c9460da74" id="r_a12f33270dd5fbe6e25ffec5c9460da74"><td class="memItemLeft" align="right" valign="top"><a id="a12f33270dd5fbe6e25ffec5c9460da74" name="a12f33270dd5fbe6e25ffec5c9460da74"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>prevIndex</b> = -1</td></tr>
<tr class="memdesc:a12f33270dd5fbe6e25ffec5c9460da74"><td class="mdescLeft">&#160;</td><td class="mdescRight">The index of the last sensor that was read, to identify when the callback has completed its reading. <br /></td></tr>
<tr class="separator:a12f33270dd5fbe6e25ffec5c9460da74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca9297ef9cdf768cfbf8c439e065ef6b" id="r_aca9297ef9cdf768cfbf8c439e065ef6b"><td class="memItemLeft" align="right" valign="top"><a id="aca9297ef9cdf768cfbf8c439e065ef6b" name="aca9297ef9cdf768cfbf8c439e065ef6b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>timeStamp</b> = ticks_us()</td></tr>
<tr class="separator:aca9297ef9cdf768cfbf8c439e065ef6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a300050db3b318384c331896b985cba51" id="r_a300050db3b318384c331896b985cba51"><td class="memItemLeft" align="right" valign="top"><a id="a300050db3b318384c331896b985cba51" name="a300050db3b318384c331896b985cba51"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>SENSOR_COUNT</b> = 2</td></tr>
<tr class="memdesc:a300050db3b318384c331896b985cba51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of ultrasonic sensor read by this object. <br /></td></tr>
<tr class="separator:a300050db3b318384c331896b985cba51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_ultra___sense___task_1_1_ultra___sense___task.html" title="Ultra_Sense_Task provides a driver to track the various ultrasonic sensors.">Ultra_Sense_Task</a> provides a driver to track the various ultrasonic sensors. </p>
<p>The ultrasonic sensors are the HC-SR04 model. The steps to read from each sensor are 1) start with the trigger pin low 2) drive the trigger pin high briefly 3) enable the echo pin callback 4) wait for the pin to be driven low by the sensor 6) record the time. <br  />
 Every call to the <a class="el" href="#a03c4a0f93ac63f1bc4f97dc59079f333" title="run() runs the next state of the state machine.">run()</a> function, we read, at most, one sensor, if it is available. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae84279b0dccc82bc17ed14cb86a7ede0" name="ae84279b0dccc82bc17ed14cb86a7ede0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae84279b0dccc82bc17ed14cb86a7ede0">&#9670;&#160;</a></span>callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ultra_Sense_Task.Ultra_Sense_Task.callback </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>callback(pin) defines the callback when the ultrasonic echo sensor pin is driven low by the sensor to indicate the distance. </p>
<p>Data is stored directly in the rawData variable because floating point math is forbidden in callbacks </p>

</div>
</div>
<a id="a03c4a0f93ac63f1bc4f97dc59079f333" name="a03c4a0f93ac63f1bc4f97dc59079f333"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03c4a0f93ac63f1bc4f97dc59079f333">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Ultra_Sense_Task.Ultra_Sense_Task.run </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>self</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="#a03c4a0f93ac63f1bc4f97dc59079f333" title="run() runs the next state of the state machine.">run()</a> runs the next state of the state machine. </p>
<p>It is intended to be called by the scheduler with a period of 10ms. Once in the reading state, every call to <a class="el" href="#a03c4a0f93ac63f1bc4f97dc59079f333" title="run() runs the next state of the state machine.">run()</a> does the following things: 1) enable the callback for the current sensor 3) pulse the trigger pin 4) update distance </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a86550b06ab27ccce630acb6519a40bb4" name="a86550b06ab27ccce630acb6519a40bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86550b06ab27ccce630acb6519a40bb4">&#9670;&#160;</a></span>state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Ultra_Sense_Task.Ultra_Sense_Task.state = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Next state to be run by the state machine. </p>
<p>0 = initialization, 1 = waiting, 2 = reset, 3 = sensing </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><b>Ultra_Sense_Task.py</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>Ultra_Sense_Task</b></li><li class="navelem"><a class="el" href="class_ultra___sense___task_1_1_ultra___sense___task.html">Ultra_Sense_Task</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
